# Maintainer: 謝致邦 <Yeking@Red54.com>

pkgname=android-tools
pkgver=20121119
pkgrel=1
pkgdesc="Android platform tools(adb, fastboot)"
arch=('i686' 'x86_64' 'armv7h')
depends=('libusb')
makedepends=('gcc' 'git' 'make')
provides=('adb' 'fastboot')
conflicts=('adb' 'fastboot')
url="http://android.googlesource.com/platform/system/core"
license=('Apache')
source=('adbMakefile' 'fastbootMakefile')
md5sums=('11479c2535f9ba0ef00d9ea0d9e9d694'
'cf0545c52e47149dd2880a270258cfdb')

_opt="-b tools_r21 --depth=1"
_extras="http://android.googlesource.com/platform/system/extras"
_libselinux="http://android.googlesource.com/platform/external/libselinux"

build(){
	cd $srcdir
	git clone $url $_opt
	git clone $_extras $_opt
	git clone $_libselinux $_opt
	mv adbMakefile core/adb/makefile
	mv fastbootMakefile core/fastboot/makefile
	cd core/adb
	make
	cd ../fastboot
	make
}

package(){
	cd ${srcdir}/core
	install -D adb/adb ${pkgdir}/usr/bin/adb
	install -D fastboot/fastboot ${pkgdir}/usr/bin/fastboot
}
